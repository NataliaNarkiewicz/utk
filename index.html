<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Rozpoznawanie koloru głosem</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
      transition: background-color 0.3s ease;
    }
    #colorText {
      font-size: 2rem;
      margin-top: 20px;
      font-weight: bold;
    }
    button {
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Powiedz kolor</h1>
  <p>Kliknij przycisk i powiedz np. „czerwony”, „niebieski”, „green”, „red” itd.</p>
  <button id="startBtn">Nasłuchuj</button>
  <div id="colorText"></div>
 
  <script>
    // Sprawdzenie wsparcia API
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
 
    if (!SpeechRecognition) {
      alert("Twoja przeglądarka nie wspiera Web Speech API. Spróbuj w Google Chrome.");
    } else {
      const recognition = new SpeechRecognition();
      recognition.lang = "pl-PL"; // możesz zmienić na "en-US" jeśli chcesz kolory po angielsku
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
 
      const startBtn = document.getElementById("startBtn");
      const colorText = document.getElementById("colorText");
 
      startBtn.addEventListener("click", () => {
        // Start nasłuchiwania – przeglądarka sama poprosi o dostęp do mikrofonu
        recognition.start();
        startBtn.textContent = "Nasłuchuję...";
      });
 
      recognition.addEventListener("result", (event) => {
        const transcript = event.results[0][0].transcript.trim();
        console.log("Rozpoznano:", transcript);
 
        // Wyświetl rozpoznany tekst
        colorText.textContent = transcript;
 
        // Spróbuj ustawić tło na ten kolor
        // Dla polskich nazw możesz zrobić prostą mapę
        const colorMap = {
          "czerwony": "red",
          "zielony": "green",
          "niebieski": "blue",
          "żółty": "yellow",
          "fioletowy": "purple",
          "różowy": "pink",
          "biały": "white",
          "czarny": "black",
          "pomarańczowy": "orange",
          "szary": "gray",
          "brązowy": "brown"
        };
 
        let color = transcript.toLowerCase();
 
        if (colorMap[color]) {
          color = colorMap[color];
        }
 
        // Sprawdź, czy to poprawny kolor CSS
        const testEl = document.createElement("div");
        testEl.style.color = color;
        if (testEl.style.color) {
          document.body.style.backgroundColor = color;
        }
      });
 
      recognition.addEventListener("end", () => {
        // Zakończenie nasłuchiwania
        startBtn.textContent = "Nasłuchuj";
      });
 
      recognition.addEventListener("error", (event) => {
        console.error("Błąd rozpoznawania:", event.error);
        startBtn.textContent = "Nasłuchuj";
      });
    }
  </script>
</body>
</html>
